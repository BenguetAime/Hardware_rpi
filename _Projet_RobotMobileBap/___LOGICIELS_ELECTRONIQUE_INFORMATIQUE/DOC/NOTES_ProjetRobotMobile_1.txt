
##############  22/10/2024  ##############
>> Installation des exécutables (binaries):
install(TARGETS my_node
        DESTINATION lib/${PROJECT_NAME}) 
si vous avez des nœuds ROS écrits en C++ 

>> Installation des scripts Python
install(PROGRAMS
  scripts/my_python_script.py
  DESTINATION lib/${PROJECT_NAME}
)

>> Installation des fichiers de configuration ou de ressources
install(DIRECTORY launch config
        DESTINATION share/${PROJECT_NAME})

>> Installation des bibliothèques :
Si vous avez développé une bibliothèque dans votre package, vous devez spécifier où cette bibliothèque doit être installée.
install(TARGETS my_library
        ARCHIVE DESTINATION lib
        LIBRARY DESTINATION lib
        RUNTIME DESTINATION bin)



__________________ ROS 2 ROS 2  __________________
>> ros2 launch my_pkg file.launch.py
>> ros2 launch gazebo_ros gazebo.launch.py
>> ros2 run gazebo_ros spawn_entity.py -topic robot_description -entity myRobot
_____ Si problème avec gazebo OU spawn_entity : en lien avec plusieurs instances gazebo :
>> ps aux | grep gzserver
>> killall gzserver

ps aux : liste tous les processus actifs sur le système, avec des détails comme l'utilisateur, le pourcentage de mémoire et de CPU utilisés, et d'autres informations sur chaque processus.
grep gzserver : filtre la liste des processus pour ne montrer que ceux qui contiennent le terme "gzserver".
_____

>> INSTALLER "xacro"?
	sudo apt install ros-humble-xacro
>>
colcon build --packages-select my_package

>> ros2 run tf2_tools view_frames : visualiser les repères (un fichier est créé dans le WS)
>>ros2 param get /robot_state_publisher robot_description

_____CmakeLists/Package.xml :
>>Pour un lancement basique (sans plugin particulier) du robot:
- pas besoin de "joint_state_publisher" (n'existe pas comme dépendance); besoin de rien pour SPAWN DANS gazebo, rviz aussi !
---------

__dans un fichier launch :
Les nœuds robot_state_publisher; joint_state_publisher ??

!!!__ DANS RVIZ : en faisant "ADD/ ROBOT MODEL" : écrire dans l'interface "ROBOT ODEL/ Description Topic": /robot_description;

____ RVIZ : FIXED FRAME:
if the global fixed frame in Rviz is base link frame, all the generated data are referred to the base of robot,
if the global fixed frame in Rviz is map frame, all the generated data are referred to the center of environment





########### GAZEBO CONTROL ###########
____Quand on veut faire communiquer ROS et GAZEBO, c'est par des PLUGINS
>> 
Le plugin diff_drive interprète les commandes de vitesse venant du topic ROS spécifié (cmd_vel) pour calculer la vitesse de chaque roue (gauche et droite). Ensuite, il applique la force nécessaire aux joints associés (left_wheel_joint et right_wheel_joint) pour déplacer le robot dans Gazebo.

En parallèle, le plugin publie également les données d’odométrie (odom), qui sont calculées en fonction de la rotation des roues et des paramètres de configuration. Ces données d’odométrie peuvent être utilisées pour localiser le robot dans l’espace.

>> sudo apt update
- sudo apt install ros-humble-gazebo-ros-pkgs
- ls /opt/ros/humble/lib | grep diff_drive



>> EXEMPLE :
# Pour avancer le robot
ros2 topic pub /cmd_vel geometry_msgs/Twist "{linear: {x: 0.5}, angular: {z: 0.0}}"

# Pour faire tourner le robot
ros2 topic pub /cmd_vel geometry_msgs/Twist "{linear: {x: 0.0}, angular: {z: 0.5}}"



____!!!!!!____!!!! DIFF DRIVE : 2/4 WHEELS plugins :
>> AI, Deep Learning and Robotics :
>> 
https://robotics.snowcron.com/robotics_ros2/diff_drive_ros2_control_2_wheels.htm

>> THE CONSTRUCT: diff_drive ros2
https://www.theconstruct.ai/how-to-use-the-gazebo-differential-drive-plugin-in-ros-2/



########### TELEOP KEYBOARD
>> ros2 run teleop_twist_keyboard teleop_twist_keyboard : les commandes marchent ssi ON garde le résultat dans LA FENETRE ACTIVE!

########### ODOM
>> RVIZ: Tenter de mettre "odom" comme FIXED FRAME, si on a ajouté le PLUGIN diff_drive dans le modèle urdf.xacro du robot;

>> ERREUR "no transform between "wheel_joint_left" etc:
- https://robotics.stackexchange.com/questions/104632/no-transform-between-robot-wheels-and-odom-frame

####################




############################ SOURCES INTERESSANTES
__YouTube Video : Modeling, Simulation, control OF a 4 WHEEL Robot in ROS:
>>https://www.youtube.com/watch?v=ad2jd8SCK-o&t=28s
__Fichier launch.py bien structuré:
>> https://www.reddit.com/r/ROS/comments/10hv6sa/robot_not_visible_in_gazebo_but_visible_in_rviz/?rdt=57927

!!!!!____!!!!!___ATTENTION GAZEBO : 
>> besoin de tag "inertial" pour chaque "link" dans gazebo
>> SPAWN ENTITY IN GAZEBO : 3 moyens; via "file", via "topic": best, via a "database";
>> !!__!! : ATTENTION à l'utilisation des mesh/urdf :
- <mesh filename="package://my_pkg/meshes/base_link.stl"/> : le robot ne s'affichait pas dans gazebo, mais dans Rviz2 oui;
- <mesh filename="file://$(find my_pkg)/meshes/base_link.stl"/> : marche ainsi;
- lien:
https://answers.ros.org/question/404423/whats-the-correct-way-to-load-mesh-files-in-gazebo-and-rviz/

>> Besoin des tag Concernant le "model_paht" (PAS BESOIN POUR un lancement simple, sans monde partiulier, avec un XACRO uniquement) : chemin absolu des modèles 3D
- https://www.reddit.com/r/ROS/comments/10hv6sa/robot_not_visible_in_gazebo_but_visible_in_rviz/?rdt=57927